

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Plugins &mdash; TissUUmaps 3.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/rtd_sphinx_search.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/js/rtd_sphinx_search.min.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Shortcuts" href="shortcuts.html" />
    <link rel="prev" title="Exporting screenshots" href="capture.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #a31a25" >
          

          
            <a href="../../index.html" class="icon icon-home"> TissUUmaps
          

          
            
            <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Getting started</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="images.html">Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="markers.html">Markers</a></li>
<li class="toctree-l2"><a class="reference internal" href="regions.html">Regions</a></li>
<li class="toctree-l2"><a class="reference internal" href="projects.html">Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="capture.html">Exporting screenshots</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#load-plugins">Load plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="#make-your-own-plugin">Make your own plugin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#javascript-file">Javascript file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#python-file">Python file</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="shortcuts.html">Shortcuts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sharing/index.html">Sharing projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/index.html">Advanced usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/index.html">Support</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">TissUUmaps</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Getting started</a> &raquo;</li>
        
      <li>Plugins</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/TissUUmaps/TissUUmaps-docs/blob/master/docs/starting/plugins.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="tex2jax_ignore mathjax_ignore section" id="plugins">
<h1>Plugins<a class="headerlink" href="#plugins" title="Permalink to this headline">¶</a></h1>
<div class="section" id="load-plugins">
<h2>Load plugins<a class="headerlink" href="#load-plugins" title="Permalink to this headline">¶</a></h2>
<p>In order to load plugins, first, they need to be installed. This can be done in the menu <code class="docutils literal notranslate"><span class="pre">Plugins</span> <span class="pre">&gt;</span> <span class="pre">Add</span> <span class="pre">plugin</span></code> as can be seen in the example below.</p>
<p><img alt="Add_plugin1" src="../../_images/Add_plugin1.png" /></p>
<p>Consequently, the user can check any number of plugins they desire and press <em>OK</em>.</p>
<p><img alt="Add_plugin2" src="../../_images/Add_plugin2.png" /></p>
<p>Then the tool warns the user then the installed plugins will be available after restarting TissUUmaps.</p>
<p><img alt="Add_plugin3" src="../../_images/Add_plugin3.png" /></p>
<p>After restarting the TissUUmaps, all the installed plugins are listed in the menu <code class="docutils literal notranslate"><span class="pre">Plugins</span></code> as you can see in the figure below.</p>
<p><img alt="Add_plugin4" src="../../_images/Add_plugin4.png" /></p>
<p>Once the user selects any of the installed plugins (in the example below I selected <em>Feature_Space</em>), a new tab <em>Plugins</em> appears in the upper right part of the screen with all the required boxes for filling.</p>
<p><img alt="Add_plugin5" src="../../_images/Add_plugin5.png" /></p>
</div>
<div class="section" id="make-your-own-plugin">
<h2>Make your own plugin<a class="headerlink" href="#make-your-own-plugin" title="Permalink to this headline">¶</a></h2>
<p>Download the Plugin Template python and javascript files from the <a class="reference external" href="https://tissuumaps.github.io/TissUUmaps/plugins/">Plugin Update Site</a> and put both files in your local folder <code class="docutils literal notranslate"><span class="pre">$USER_PATH/.tissuumaps/plugins/</span></code>. You can then change the plugin name and add your own options and functions.</p>
<div class="section" id="javascript-file">
<h3>Javascript file<a class="headerlink" href="#javascript-file" title="Permalink to this headline">¶</a></h3>
<p>When loading a plugin, the function <code class="docutils literal notranslate"><span class="pre">PluginName.init(container)</span></code> will be called. The <code class="docutils literal notranslate"><span class="pre">container</span></code> is an html Element that will be added to the plugin menu. Use this element to add options and texts related to your plugin.</p>
<p><img alt="plugin container" src="../../_images/plugin_container.png" /></p>
<div class="section" id="javascript-example">
<h4>Javascript example:<a class="headerlink" href="#javascript-example" title="Permalink to this headline">¶</a></h4>
<p>File <code class="docutils literal notranslate"><span class="pre">Plugin_template.js</span></code>:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">Plugin_template</span><span class="p">;</span>
<span class="nx">Plugin_template</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Template Plugin&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">parameters</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">_section_test</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="s2">&quot;label&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Test section&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;title&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Section 1&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;section&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;collapsed&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">_message</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="s2">&quot;label&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Message&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;text&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;default&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Hello world&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">_testButton</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="s2">&quot;label&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Test button&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;button&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * This method is called when the document is loaded.</span>
<span class="cm"> * The container element is a div where the plugin options will be displayed.</span>
<span class="cm"> * @summary After setting up the tmapp object, initialize it*/</span>
<span class="nx">Plugin_template</span><span class="p">.</span><span class="nx">init</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">container</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">interfaceUtils</span><span class="p">.</span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;The plugin has been loaded&quot;</span><span class="p">);</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * This method is called when a button is clicked or a parameter value is changed*/</span>
<span class="nx">Plugin_template</span><span class="p">.</span><span class="nx">inputTrigger</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">input</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;inputTrigger&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">input</span><span class="p">);</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">input</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">&quot;_testButton&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Plugin_template</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;_message&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">Plugin_template</span><span class="p">.</span><span class="nx">demo</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="nx">Plugin_template</span><span class="p">.</span><span class="nx">demo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">successCallback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">interfaceUtils</span><span class="p">.</span><span class="nx">alert</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">errorCallback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Error:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">);</span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="c1">// Call the Python API endpoint &quot;server_demo&quot;</span>
<span class="w">  </span><span class="nx">Plugin_template</span><span class="p">.</span><span class="nx">api</span><span class="p">(</span>
<span class="w">    </span><span class="s2">&quot;server_demo&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">{</span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="nx">message</span><span class="p">},</span>
<span class="w">    </span><span class="nx">successCallback</span><span class="p">,</span>
<span class="w">    </span><span class="nx">errorCallback</span><span class="p">,</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="plugin-parameters">
<h4>Plugin parameters<a class="headerlink" href="#plugin-parameters" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">parameters</span></code> object contains the parameters of your plugin. Each parameter is an object with the following properties:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">label</span></code>: the text that will be displayed in front of the parameter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code>: the type of parameter. It can be one of the following:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">button</span></code>: an input button.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">checkbox</span></code>: a checkbox input.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">text</span></code>: a text input.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">number</span></code>: a number input.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">select</span></code>: a dropdown list.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">label</span></code>: a text label.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">section</span></code>: a section that can be collapsed or expanded.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">default</span></code>: the default value of the parameter [for <code class="docutils literal notranslate"><span class="pre">type</span></code> in <code class="docutils literal notranslate"><span class="pre">checkbox</span></code>, <code class="docutils literal notranslate"><span class="pre">number</span></code>, <code class="docutils literal notranslate"><span class="pre">select</span></code>, <code class="docutils literal notranslate"><span class="pre">text</span></code>].</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: an array of options [for <code class="docutils literal notranslate"><span class="pre">type</span></code> in <code class="docutils literal notranslate"><span class="pre">select</span></code>].</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">title</span></code>: the title of a section [for <code class="docutils literal notranslate"><span class="pre">type</span></code> in <code class="docutils literal notranslate"><span class="pre">section</span></code>].</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">collapsed</span></code>: a boolean indicating if a section is collapsed or expanded by default [for <code class="docutils literal notranslate"><span class="pre">type</span></code> in <code class="docutils literal notranslate"><span class="pre">section</span></code>].</p></li>
</ul>
</div>
<div class="section" id="javascript-api">
<h4>Javascript API<a class="headerlink" href="#javascript-api" title="Permalink to this headline">¶</a></h4>
<p>TissUUmaps offers helper functions to help you create your plugin:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">My_plugin_name.set(paramName,</span> <span class="pre">value)</span></code>: set the value of a parameter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">My_plugin_name.get(paramName)</span></code>: get the value of a parameter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">My_plugin_name.getInputID(paramName)</span></code>: get the id of the html element associated with a parameter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">My_plugin_name.api(endpoint,</span> <span class="pre">data,</span> <span class="pre">successCallback,</span> <span class="pre">errorCallback)</span></code>: call a Python method from Javascript. The endpoint is the name of the method, and the data is an object that will be passed as a parameter to the method. The successCallback and errorCallback are functions that will be called after the method has been called. The successCallback will be called with the result of the method as a parameter, and the errorCallback will be called with the error message as a parameter.</p></li>
</ul>
<p>You can access the complete TissUUmaps javascript API <a class="reference external" href="https://tissuumaps.github.io/TissUUmapsCore/">here</a>.</p>
</div>
</div>
<div class="section" id="python-file">
<h3>Python file<a class="headerlink" href="#python-file" title="Permalink to this headline">¶</a></h3>
<p>You only need to use the Python file if your plugin needs to do processing on the server side. For pure javascript plugins, you can leave this file empty.</p>
<p>The python file should implement the class <code class="docutils literal notranslate"><span class="pre">Plugin</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">abort</span><span class="p">,</span> <span class="n">make_response</span>

<span class="k">class</span> <span class="nc">Plugin</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">app</span> <span class="o">=</span> <span class="n">app</span>

    <span class="k">def</span> <span class="nf">server_demo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jsonParam</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">jsonParam</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;No arguments, aborting.&quot;</span><span class="p">)</span>
            <span class="n">abort</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="n">make_response</span><span class="p">(</span><span class="s2">&quot;The server received the message: &quot;</span> <span class="o">+</span> <span class="n">jsonParam</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">resp</span>

</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">app</span></code> object being the flask application running the TissUUmaps server.</p>
<p>You can call a Python method inside the <code class="docutils literal notranslate"><span class="pre">Plugin</span></code> class from Javascript using Ajax and the Python API. The endpoint for a method <code class="docutils literal notranslate"><span class="pre">methodName</span></code> of the plugin <code class="docutils literal notranslate"><span class="pre">PluginName</span></code> will be: <code class="docutils literal notranslate"><span class="pre">/plugins/methodName/functionName</span></code>. Data can be transmitted through Ajax as stringified JSON, and will be available as a parameter inside the method.</p>
<p>See the Plugin Template for a working example of Javascript / Python communication.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="shortcuts.html" class="btn btn-neutral float-right" title="Shortcuts" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="capture.html" class="btn btn-neutral float-left" title="Exporting screenshots" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2023, The TissUUmaps Team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>